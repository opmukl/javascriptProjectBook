<!DOCTYPE html>
<html lang="ko-KR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>날씨 위젯</title>
  <link rel="stylesheet" href="css/style.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.3/jquery.min.js"></script>
</head>
<body>
  <h1>OpenWeatherMap</h1>

  <div class="weather-info">
    <h2 class="city"></h1>
      <section>
        <p class="wearther-id"></p>
        <figure class="icon"></figure>
        <p class="temp"></p>
        <aside>
          <p class="temp-max"></p>
          <p class="temp-min"></p>
        </aside>
      </section>
  </div>

  <script>
    // API 요청 url 변수
    var url = 'http://api.openweathermap.org/data/2.5/weather?q=seoul&APPID=caea794f99d13e54c746012ecfb21c8c';
  
    $.getJSON(url, function(data){
      // 날씨 data
      var sys = data.sys;                 //국가명, 일출/일몰
      var city = data.name;               // 도시명
      var weather = data.weather;         // 날씨 객체
      var main = data.main;               // 온도, 기압 관련 객체

      var weatherMain = weather[0].main;  // 구름 상태(Cloudiness)
      var weatherId = weather[0].id;      // 날씨 상태 id 코드
      var icon = weather[0].icon;         // 날씨 아이콘 정보
      var country = sys.country;          // 국가명
      var temp = main.temp;               // 현재 온도
      var tempMin = main.temp_min;        // 최저 온도
      var tempMax = main.temp_max;        // 최고 온도

      // 날씨 정보 표기
      $('body').append( weatherMain + ', ' + icon + ' '
        + '현재 온도: ' + parseInt(temp-273.15) + ' '
        + '최저 온도: ' + parseInt(tempMin-273.15) + ' '
        + '최고 온도: ' + parseInt(tempMax-273.15) + ' '
        + country + ' ' + city + ' ' + weatherId + ' ' + '<br>');

      var iconUrl = 'http://openweathermap.org/img/w/' + icon;
      $('body').append('<img src="' + iconUrl + '.png">');
    
    });
  </script>

</body>
</html>